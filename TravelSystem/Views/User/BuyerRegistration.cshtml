@model TravelSystem.Models.AccountViewModels.RegisterViewModel
@using Microsoft.EntityFrameworkCore;
@{
    List<Vehicles> vehicles = TempData["Vehicles"] as List<Vehicles>;
    var index = 0;
    Layout = null;
}
<style>
    .product-description .title-price {
        font-size: 15px !important;
    }
</style>

<div class="wrapper">


    <div class="container">
        <div id="sucessMessageContainer">

            <div class="row margin-top-20">
                <div class="form-group">
                    <div class="col-xs-12 padding-top-20" style=" background-color: #eee;">
                        <ul class="nav nav-pills nav-justified thumbnail setup-panel">
                            <li class="active">
                                <a href="#step-1">
                                    <h4 class="list-group-item-heading">Profile</h4>
                                    <p class="list-group-item-text"></p>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#step-2">
                                    <h4 class="list-group-item-heading">Loan Application</h4>
                                    <p class="list-group-item-text"></p>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#step-3">
                                    <h4 class="list-group-item-heading">Vehicle Details</h4>
                                    <p class="list-group-item-text"></p>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#step-4">
                                    <h4 class="list-group-item-heading">Extras</h4>
                                    <p class="list-group-item-text"></p>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
            @using (Html.BeginForm("Register", "User", FormMethod.Post, new { enctype = "multipart/form-data", @class = "sky-form contact-style", role = "form", @id = "BuyerRegForm" }))
            {
                @Html.AntiForgeryToken()

                <div id="errorsValidation">

                </div>

                <div class="row setup-content" id="step-1">
                    <div class="col-xs-12">
                        <div class="col-md-12 well text-center">


                            <div class="col-md-6 mb-margin-bottom-30 col-centered">
                                <input type="hidden" name="UserRole" id="UserRole" value="Buyer" />



                                <fieldset class="no-padding">
                                    <label></label>
                                    <div class="row sky-space-20">
                                        <div class="col-md-12">
                                            <div>
                                                <input type="hidden" name="IsBuyer" value="true" />
                                                @Html.TextBoxFor(m => m.FullName, new { @placeholder = "Full Name*", @id = "name", @class = "form-control" })
                                                <span class="text-danger">@Html.ValidationMessageFor(m => m.FullName, "")</span>
                                            </div>
                                        </div>
                                    </div>

                                    <label></label>
                                    <div class="row sky-space-20">
                                        <div class="col-md-12">
                                            <div>
                                                @Html.TextBoxFor(m => m.Email, new { @placeholder = "Email*", @id = "email", @class = "form-control", })
                                                <span class="text-danger">@Html.ValidationMessageFor(m => m.Email, "")</span>
                                            </div>
                                        </div>
                                    </div>

                                    <label></label>
                                    <div class="row sky-space-20">
                                        <div class="col-md-12 ">
                                            <div>
                                                @Html.PasswordFor(m => m.Password, new { @id = "user_password", @placeholder = "Password*", @type = "password", @class = "form-control" })
                                                <span class="text-danger">@Html.ValidationMessageFor(m => m.Password, "")</span>
                                            </div>
                                        </div>
                                    </div>

                                    <label></label>
                                    <div class="row sky-space-20">
                                        <div class="col-md-12 ">
                                            <div>
                                                @Html.PasswordFor(m => m.ConfirmPassword, new { @placeholder = "Confirm Password*", @required = "required", @type = "password", @class = "form-control" })
                                                <span class="text-danger">@Html.ValidationMessageFor(m => m.ConfirmPassword, "")</span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                            </div>



                            <button id="activate-step-2" class="btn btn-primary btn-lg" style=" margin-top: 20px;">Next</button>
                        </div>
                    </div>
                </div>
                <div class="row setup-content" id="step-2">
                    <div class="col-xs-12">
                        <div class="col-md-12 well text-center">

                            <div class="container content">
                                <div class="row">
                                    <div class="col-md-12 col-centered col-md-offset-3 col-sm-8 col-sm-offset-2">
                                        <div class="reg-page">
                                            <div class="reg-header">
                                                <h2 style=" margin-bottom: 20px;">APPLICANT DATA</h2>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].CompanyName, new { @placeholder = "Legal Company NAME", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].CompanyName, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].TradeStyle, new { @placeholder = "Trade Style (DBA)", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].TradeStyle, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].YearEstablished, new { @placeholder = "Year Established", @type = "date", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].YearEstablished, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].FederalTaxIdNumber, new { @placeholder = "Federal Tax ID Number", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].FederalTaxIdNumber, "")</span>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].Address, new { @id = "Applicant_address", @placeholder = "Address", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].Address, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].City, new { @id = "Applicant_city", @placeholder = "City", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].City, "")</span>
                                                </div>
                                                <div class="col-sm-2">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].State, new { @id = "Applicant_state", @placeholder = "State", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].State, "")</span>
                                                </div>
                                                <div class="col-sm-2">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].ZipCode, new { @id = "Applicant_zipCode", @placeholder = "Zip Code", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ZipCode, "")</span>
                                                </div>
                                                <div class="col-sm-2">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].Country, new { @id = "Applicant_country", @placeholder = "Country", @required = "required", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].Country, "")</span>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].ContactPerson, new { @placeholder = "Person to Contact", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ContactPerson, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].Telephone, new { @id = "Applicant_telephone", @placeholder = "Business Telephone #", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].Telephone, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(x => x.ApplicantDetails[0].FaxNumber, new { @placeholder = "Business Fax #", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].FaxNumber, "")</span>
                                                </div>

                                            </div>

                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <p>Entity Type (Check One Box)</p>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="col-sm-2">
                                                        <label>

                                                            @Html.CheckBoxFor(m => m.ApplicantDetails[0].IsCorportation, new { @class = "check1", @checked = true }) Corporation
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>
                                                            @Html.CheckBoxFor(m => m.ApplicantDetails[0].IsPartnership, new { @class = "check1" }) Partnership
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>
                                                            @Html.CheckBoxFor(m => m.ApplicantDetails[0].IsProprietorship, new { @class = "check1" }) Proprietorship
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>
                                                            @Html.CheckBoxFor(m => m.ApplicantDetails[0].IsLlc, new { @class = "check1" })LLC
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>
                                                            @Html.CheckBoxFor(m => m.ApplicantDetails[0].IsCcorp, new { @class = "check1" })C Corp.
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <label>
                                                            @Html.CheckBoxFor(m => m.ApplicantDetails[0].IsScorp, new { @class = "check1" }) S Corp.
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">

                                                <div class="col-sm-12" style=" margin-top: 12px;">
                                                    <p>Current Fleet Size</p>
                                                </div>
                                                <div class="col-sm-12">
                                                    <div class="col-sm-2">
                                                        @Html.TextBoxFor(m => m.ApplicantDetails[0].CurrentCoaches, new {@type="number", @class = "form-control margin-bottom-5", @placeholder = "Coaches" })
                                                        <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].CurrentCoaches, "")</span>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        @Html.TextBoxFor(m => m.ApplicantDetails[0].CurrentVans, new { @type = "number", @class = "form-control margin-bottom-5", @placeholder = "Vans" })
                                                        <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].CurrentVans, "")</span>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        @Html.TextBoxFor(m => m.ApplicantDetails[0].CurrentSchoolBuses, new { @type = "number", @class = "form-control margin-bottom-5", @placeholder = "School Buses" })
                                                        <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].CurrentSchoolBuses, "")</span>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        @Html.TextBoxFor(m => m.ApplicantDetails[0].CurrentLimes, new { @type = "number", @class = "form-control margin-bottom-5", @placeholder = "Limes" })
                                                        <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].CurrentLimes, "")</span>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        @Html.TextBoxFor(m => m.ApplicantDetails[0].CurrentOthers, new { @type = "number", @class = "form-control margin-bottom-5", @placeholder = "Other" })
                                                        <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].CurrentOthers, "")</span>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        @Html.TextBoxFor(m => m.ApplicantDetails[0].CurrentFederalTaxIdNumber, new { @class = "form-control margin-bottom-5", @placeholder = "Federal Tax ID Number" })
                                                        <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].CurrentFederalTaxIdNumber, "")</span>
                                                    </div>
                                                </div>
                                            </div>
                                            @Html.TextAreaFor(m => m.ApplicantDetails[0].Message, new { @rows = 8, @placeholder = "List Affiliated Companies Or Subsidaries", @class = "form-control" })
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="container content">
                                <div class="row">
                                    <div class="col-md-12 col-centered col-md-offset-3 col-sm-8 col-sm-offset-2">
                                        <div class="reg-page" id="guarantors">
                                            <div class="reg-header">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <h2 style=" margin-bottom: 20px;">PARTNERS, GUARANTORS AND PRINCIPALS</h2>
                                                    </div>
                                                    <div class="col-6 text-right margin-bottom-10">
                                                        <button type="button" class="btn btn-sm btn-primary float-right" id="guarantorBtn"><span class="fa fa-plus"></span></button>
                                                        <button type="button" class="btn btn-sm btn-danger float-right" id="guarantorRemoveBtn" style="display:none"><span class="fa fa-minus"></span></button>
                                                    </div>
                                                </div>


                                            </div>


                                            <div class="row">
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].PrincipleOwner, new { @id = "ApplicantGuarantors_principleOwner", @placeholder = "Principal Owner", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].PrincipleOwner, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].OwnerShip, new { @id = "ApplicantGuarantors_ownership", @placeholder = "Ownership", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].OwnerShip, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].Title, new { @id = "ApplicantGuarantors_title", @placeholder = "Title", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].Title, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].SocialSecurityNumber, new { @id = "ApplicantGuarantors_socialSecurityNumber", @placeholder = "Social Security Number", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].SocialSecurityNumber, "")</span>
                                                </div>
                                            </div>

                                            <div class="row" style=" margin-bottom: 20px;">
                                                <div class="col-sm-4">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].Address, new { @id = "ApplicantGuarantors_address", @placeholder = "Address", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].Address, "")</span>
                                                </div>
                                                <div class="col-sm-2">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].City, new { @id = "ApplicantGuarantors_city", @placeholder = "City", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].City, "")</span>
                                                </div>
                                                <div class="col-sm-2">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].State, new { @id = "ApplicantGuarantors_state", @placeholder = "State", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].State, "")</span>
                                                </div>
                                                <div class="col-sm-4">
                                                    @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[0].ZipCode, new { @id = "ApplicantGuarantors_zipCode", @placeholder = "Zip Code", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].ZipCode, "")</span>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container content">
                                <div class="row">
                                    <div class="col-md-12 col-centered col-md-offset-3 col-sm-8 col-sm-offset-2">
                                        <div class="reg-page">
                                            <div class="reg-header">
                                                <h2 style=" margin-bottom: 20px;">EQUIPMENT TO BE FINANCED</h2>
                                            </div>


                                            <div class="row">
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].Quantity, new { @placeholder = "Quantity", @type = "number", @class = "form-control margin-bottom-5", @value = "1" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].Quantity, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].YearManufactureModel, new { @placeholder = "Year,Manufacture,Model", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].YearManufactureModel, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].Srequested, new { @placeholder = "S Requested", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].Srequested, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].Terms, new { @placeholder = "Terms", @class = "form-control margin-bottom-5" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsFinancedEquipments[0].Terms, "")</span>
                                                </div>
                                            </div>


                                            <div class="row">

                                                <div class="col-sm-12">

                                                    <div class="col-sm-3">
                                                        <label>
                                                            @Html.CheckBoxFor(o => o.ApplicantDetails[0].ApplicantsFinancedEquipments[0].IsReplacement, new { @class = "check2", @checked = true }) Replacement
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label>
                                                            @Html.CheckBoxFor(o => o.ApplicantDetails[0].ApplicantsFinancedEquipments[0].IsLease, new { @class = "check2" }) Lease
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label>
                                                            @Html.CheckBoxFor(o => o.ApplicantDetails[0].ApplicantsFinancedEquipments[0].IsLoan, new { @class = "check2" }) Loan
                                                        </label>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <label>
                                                            @Html.CheckBoxFor(o => o.ApplicantDetails[0].ApplicantsFinancedEquipments[0].IsExpansion, new { @class = "check2" }) Expansion
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container content">
                                <div class="row">
                                    <div class="col-md-12 col-centered col-md-offset-3 col-sm-8 col-sm-offset-2">
                                        <div class="reg-page">
                                            <div class="reg-header">
                                                <h2 style=" margin-bottom: 20px;">INSURANCE INFORMATION</h2>
                                            </div>


                                            <div class="row">
                                                <div class="col-sm-6">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsInsurances[0].InsuranceCompanyName, new { @class = "form-control margin-bottom-5", @placeholder = "Insurance Company Name (Liability Physical Damage)" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsInsurances[0].InsuranceCompanyName, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsInsurances[0].Agent, new { @class = "form-control margin-bottom-5", @placeholder = "Agent" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsInsurances[0].Agent, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsInsurances[0].Telephone, new { @class = "form-control margin-bottom-5", @placeholder = "Telephone" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsInsurances[0].Telephone, "")</span>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container content">
                                <div class="row">
                                    <div class="col-md-12 col-centered col-md-offset-3 col-sm-8 col-sm-offset-2">
                                        <div class="reg-page" id="credit">
                                            <div class="reg-header">
                                                <div class="row">
                                                    <div class="col-6">
                                                        <h2 style=" margin-bottom: 20px;">CREDIT REFERENCES</h2>
                                                    </div>
                                                    <div class="col-6 text-right margin-bottom-10">
                                                        <button type="button" class="btn btn-sm btn-primary float-right" id="creditBtn"><span class="fa fa-plus"></span></button>
                                                        <button type="button" class="btn btn-sm btn-danger float-right" id="creditRemoveBtn" style="display:none"><span class="fa fa-minus"></span></button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].BankName, new { @class = "form-control margin-bottom-5", @placeholder = "Bank Name" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].BankName, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].AccountNumber, new { @class = "form-control margin-bottom-5", @placeholder = "Account Number" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].AccountNumber, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].Contact, new { @class = "form-control margin-bottom-5", @placeholder = "Contact" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].Contact, "")</span>
                                                </div>
                                                <div class="col-sm-3">
                                                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].Telephone, new { @class = "form-control margin-bottom-5", @placeholder = "Telephone" })
                                                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[0].Telephone, "")</span>
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container content">
                                <div class="row">
                                    <div class="col-md-12 col-centered col-md-offset-3 col-sm-8 col-sm-offset-2">
                                        <div class="reg-page">
                                            @Html.TextAreaFor(m => m.ApplicantDetails[0].CompanyInformation, new { @class = "form-control", @rows = "8", @placeholder = "Company History/ Information" })

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container content">
                                <div class="row">
                                    <div class="col-md-12 col-centered col-md-offset-3 col-sm-8 col-sm-offset-2">
                                        <div class="reg-page">
                                            @Html.TextAreaFor(m => m.ApplicantDetails[0].ReasonForAcquisition, new { @class = "form-control", @rows = "8", @placeholder = "Reason For Acquisition" })

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button id="activate-step-3" class="btn btn-primary btn-lg">Next</button>
                        </div>
                    </div>
                </div>
                <div class="row setup-content" id="step-3">
                    <div class="col-xs-12" id="selectinventory">
                        <div class="row illustration-v2 margin-bottom-30">
                            @foreach (var item in vehicles)
                            {
                                <input type="hidden" name="Vehicles[@index].Id" value="@vehicles[index].Id" />
                                <div class="col-md-3">
                                    <div class="product-img product-img-brd">
                                        <a href="@Url.Action("VehicleDetail","Vehicles",new{id=item.Id})"><img class="full-width img-responsive" style="width: 300px;height: 300px;" src="~/VehicleImages/@item.VehicleImages.Select(o=>o.FileNameOnDisk).FirstOrDefault()" alt=""></a>
                                        @*<a class="add-to-cart" href="#"><i class="fa fa-shopping-cart"></i>Add to cart</a>*@
                                    </div>
                                    <div class="product-description product-description-brd margin-bottom-30">
                                        <div class="overflow-h margin-bottom-5">
                                            <div class="pull-left">
                                                <h4 class="title-price"><a href="@Url.Action("VehicleDetail","Vehicles",new{id=item.Id})">@item.VehicleTypes.VehicleTypeName</a></h4>
                                                <span class="gender text-uppercase">@item.CityOrState</span>
                                                <span class="gender">Make Year - @item.MakeYear.ToString("yyyy")</span>
                                            </div>
                                            <div class="product-price">
                                                <span class="title-price">$@item.SalesPrice</span>
                                            </div>
                                        </div>
                                        <ul class="list-inline product-ratings">
                                            @for (var i = 0; i < item.Stars; i++)
                                            {
                                                <li><i class="rating-selected fa fa-star"></i></li>
                                            }
                                            @for (var i = 0; i < 5 - item.Stars; i++)
                                            {
                                                <li><i class="rating fa fa-star"></i></li>
                                            }
                                            <li class="like-icon">@Html.CheckBoxFor(x => x.Vehicles[index].IsChecked, new { @class = "checkboxVehicle" })</li>
                                        </ul>
                                    </div>
                                </div>
                            }

                        </div>

                        @*<a href="javascript:LoadForm()" class="btn btn-primary btn-lg" style=" margin-top: 30px;">Skip</a>*@

                    </div>

                    <button id="activate-step-4" class="btn btn-primary btn-lg hidden" disabled>Next</button>
                    <button id="activate-step-newVehicle" class="btn btn-primary btn-lg">Skip</button>
                </div>

                <div class="row setup-content" id="step-4">
                    <div class="col-xs-12 well text-center">


                        <h3 class="text-center">Do you need the vehicle to be delivered?</h3>
                        <div class="col-md-2 col-centered">
                            <div class="form-group">

                                <div class="row">

                                    <div class="col-sm-12">

                                        <div class="col-sm-4">
                                            <label>
                                                <input id="ToBeDelievered" type="radio" name="ApplicantDetails[0].ToBeDelievered" value="True" checked="checked">Yes
                                            </label>
                                        </div>
                                        <div class="col-sm-4">
                                            <label>
                                                <input id="ToBeDelievered" type="radio" name="ApplicantDetails[0].ToBeDelievered" value="False">No
                                            </label>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>

                    </div>
                    <img src="~/assets/img/30.gif" id="gif" style="display: block; margin: 0 auto; visibility: hidden;">
                    <input id="SubmitBuyer" type="submit" class="btn btn-primary btn-lg" value="Next" />
                </div>

            }

        </div>
    </div>
    <div style="display:none" id="newVehicle">
        <script src="~/assets/plugins/jquery/jquery.min.js"></script>
        <script src="~/js/location.js"></script>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAuvmA6K2UJ2o-xYy2flqy2-43aLmsgjQg&libraries=places&callback=initAutocomplete"
                async defer></script>
        <div class="col-xs-12" id="step-6">
            <div class="col-md-12 well text-center">

                <div class="col-md-6 col-centered">
                    <div class="reg-header">
                        <h2>Put the details of your vehicle</h2>
                    </div>
                    <select class="form-control margin-bottom-5" name="ApplicantDetails[0].ApplicantVehicles[0].VehicleTypeId">
                        @foreach (var item in TempData["VehicleTypes"] as IEnumerable<TravelSystem.Models.VehicleTypes>)
                        {
                            <option value="@item.Id">@item.VehicleTypeName (@item.Description)</option>
                        }

                    </select>
                    @*<input type="text" placeholder="Vehicle type*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].MakeYear, new { @placeholder = "Make*", @type = "date", @class = "form-control margin-bottom-5" })
                    @*<input type="text" placeholder="Make*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].Model, new { @placeholder = "Model*", @class = "form-control margin-bottom-5" })
                    @*<input type="text" placeholder="Model*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].Mileage, new { @placeholder = "Mileage*", @class = "form-control margin-bottom-5" })
                    @*<input type="text" placeholder="Mileage*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].PassengersSeats, new { @placeholder = "Passenger Count*", @class = "form-control margin-bottom-5" })
                    @*<input type="text" placeholder="passenger count*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].SalesPrice, new { @type = "number", @placeholder = "Sales Price*", @class = "form-control margin-bottom-5" })
                    @*<input type="text" placeholder="Sales price*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].Location, new { @placeholder = "Location of Bus*", @id = "autocomplete", @onFocus = "geolocate()", @class = "form-control margin-bottom-5" })
                    @*<input type="text" placeholder="Location of Bus*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].CityOrState, new { @placeholder = "City & State*", @class = "form-control margin-bottom-5" })
                    @*<input type="text" placeholder="City & State*" class="form-control margin-bottom-5">*@
                    @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].Vinnumber, new { @placeholder = "N/N Number*", @class = "form-control margin-bottom-5" })

                    <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantVehicles[0].Vinnumber, "")</span>
                    @*<input type="text" placeholder="V/N number*" class="form-control margin-bottom-5">*@

                    <hr>

                </div>


                <button id="activate-step-newVehicleBtn" type="button" value="vehilce" class="btn btn-primary btn-lg">Next</button>
            </div>
        </div>
    </div>

</div><!--/wrapper-->
<!-- JS Global Compulsory -->
<script src="~/assets/plugins/jquery/jquery.min.js"></script>

<script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
<script id="guarantor-template" type="text/x-custom-template">
    <div class="row">
        <div class="col-sm-3">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].PrincipleOwner, new { @id = "ApplicantGuarantors_principleOwner", @placeholder = "Principal Owner", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[-1].PrincipleOwner, "")</span>
        </div>
        <div class="col-sm-3">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].OwnerShip, new { @id = "ApplicantGuarantors_ownership", @placeholder = "Ownership", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[-1].OwnerShip, "")</span>
        </div>
        <div class="col-sm-3">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].Title, new { @id = "ApplicantGuarantors_title", @placeholder = "Title", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[-1].Title, "")</span>
        </div>
        <div class="col-sm-3">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].SocialSecurityNumber, new { @id = "ApplicantGuarantors_socialSecurityNumber", @placeholder = "Social Security Number", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[-1].SocialSecurityNumber, "")</span>
        </div>
    </div>

    <div class="row" style=" margin-bottom: 20px;">
        <div class="col-sm-4">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].Address, new { @id = "ApplicantGuarantors_address", @placeholder = "Address", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].Address, "")</span>
        </div>
        <div class="col-sm-2">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].City, new { @id = "ApplicantGuarantors_city", @placeholder = "City", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].City, "")</span>
        </div>
        <div class="col-sm-2">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].State, new { @id = "ApplicantGuarantors_state", @placeholder = "State", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].State, "")</span>
        </div>
        <div class="col-sm-4">
            @Html.TextBoxFor(o => o.ApplicantDetails[0].ApplicantsGuarantors[-1].ZipCode, new { @id = "ApplicantGuarantors_zipCode", @placeholder = "Zip Code", @class = "form-control margin-bottom-5" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsGuarantors[0].ZipCode, "")</span>
        </div>

    </div>
</script>
<script id="credit-template" type="text/x-custom-template">
    <div class="row">
        <div class="col-sm-3">
            @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].BankName, new { @class = "form-control margin-bottom-5", @id = "bankName", @placeholder = "Bank Name" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].BankName, "")</span>
        </div>
        <div class="col-sm-3">
            @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].AccountNumber, new { @class = "form-control margin-bottom-5", @id = "accountNumber", @placeholder = "Account Number" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].AccountNumber, "")</span>
        </div>
        <div class="col-sm-3">
            @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].Contact, new { @class = "form-control margin-bottom-5", @id = "contact", @placeholder = "Contact" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].Contact, "")</span>
        </div>
        <div class="col-sm-3">
            @Html.TextBoxFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].Telephone, new { @class = "form-control margin-bottom-5", @id = "telePhone", @placeholder = "Telephone" })
            <span class="text-danger">@Html.ValidationMessageFor(m => m.ApplicantDetails[0].ApplicantsCreditReferences[-1].Telephone, "")</span>
        </div>

    </div>
</script>

<script>

    "use strict"
    jQuery(document).ready(function () {
        var validator = $("#BuyerRegForm").validate();
        var navListItems = $('ul.setup-panel li a'),
            allWells = $('.setup-content');

        allWells.hide();

        navListItems.click(function (e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                $item = $(this).closest('li');

            if (!$item.hasClass('disabled')) {
                navListItems.closest('li').removeClass('active');
                $item.addClass('active');
                allWells.hide();
                $target.show();
            }
        });

        $('ul.setup-panel li.active a').trigger('click');

        // DEMO ONLY //
        $('#activate-step-2').on('click', function (e) {
            var count = 0;
            var totalInputs = $('#step-1').find(':input').each(function () {
                if (!validator.element(this)) {
                    count += 1;
                }
            });
            if (count === 0) {
                $('ul.setup-panel li:eq(1)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-2"]').trigger('click');
                $(this).remove();
            }
        })
        $('#activate-step-newVehicle').on('click', function (e) {
            $("#step-3").empty();
            $("#step-3").append($("#newVehicle").html());
            $("#newVehicle").empty();
        })
        $('#activate-step-3').on('click', function (e) {
            var count = 0;
            var totalInputs = $('#step-2').find(':input').each(function () {
                if (!validator.element(this)) {
                    count += 1;
                }
            });
            if (count === 0) {
                $('ul.setup-panel li:eq(2)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-3"]').trigger('click');
                $(this).remove();
                $("#activate-step-4").removeClass("hidden");
            }

        });
        function isEmpty(value) {
            return typeof value == 'string' && !value.trim() || typeof value == 'undefined' || value === null;
        }

        $(document).on('click', '#activate-step-newVehicleBtn', function (e) {
            var count = 0;
            $('.removeText').remove();
            var totalInputs = $('#step-3').find(':input').each(function () {
                if (isEmpty($(this).val())) {
                    count += 1;

                    $(this).after("<span class='text-danger removeText'>Required</span>");
                }
            });
            if (count === 0) {
                $('ul.setup-panel li:eq(3)').removeClass('disabled');
                $('ul.setup-panel li a[href="#step-4"]').trigger('click');
                $(this).remove();
            }

        })
        $('#activate-step-4').on('click', function (e) {
            $('ul.setup-panel li:eq(3)').removeClass('disabled');
            $('ul.setup-panel li a[href="#step-4"]').trigger('click');
            $(this).remove();
        })

        $('#activate-step-5').on('click', function (e) {
            $('ul.setup-panel li:eq(4)').removeClass('disabled');
            $('ul.setup-panel li a[href="#step-5"]').trigger('click');
            $(this).remove();
        })
        var CheckBoxesAll = [];
        $(".checkboxVehicle").click(function () {
            if ($(this).prop("checked")) {
                CheckBoxesAll.push(1);
            }
            else {
                CheckBoxesAll.splice(0, 1);
            }
            if (CheckBoxesAll.length > 0) {
                $("#activate-step-4").removeAttr("disabled");
            }
            else {
                $("#activate-step-4").attr("disabled");
            }
        });
        $('input[type="checkbox"]').on('change', function () {
            var className = $(this).attr('class');
            var inputs = $("." + className).not(this);
            console.log(inputs);
            for (var i = 0; i < inputs.length; i++) {
                $(inputs[i]).prop('checked', false);
            }
        });
        $("#guarantorBtn").click(function () {
            var item = parseInt($("#guarantors").children(".row").length) / 2;
            var template = $('#guarantor-template').html();
            template = template.replace(/-1/g, item);
            $("#guarantors").append(template);

            var item2 = parseInt($("#guarantors").children(".row").length) / 2;
            if (item2 > 1) {
                $("#guarantorRemoveBtn").show();
            }
            else {
                $("#guarantorRemoveBtn").hide();
            }
        });
        $("#guarantorRemoveBtn").click(function () {
            var item = parseInt($("#guarantors").children(".row").length) / 2;
            $('#guarantors > .row').slice(-2).remove();
            var item2 = parseInt($("#guarantors").children(".row").length) / 2;
            if (item2 > 1) {
                $("#guarantorRemoveBtn").show();
            }
            else {
                $("#guarantorRemoveBtn").hide();
            }
        });
        $("#creditBtn").click(function () {
            var item = parseInt($("#credit").children(".row").length) / 1;
            var template = $('#credit-template').html();
            template = template.replace(/-1/g, item);
            $("#credit").append(template);
            var item2 = parseInt($("#credit").children(".row").length) / 1;
            if (item2 > 1) {
                $("#creditRemoveBtn").show();
            }
            else {
                $("#creditRemoveBtn").hide();
            }
        });
        $("#creditRemoveBtn").click(function () {
            var item = parseInt($("#credit").children(".row").length) / 1;
            $('#credit > .row').slice(-1).remove();
            var item2 = parseInt($("#credit").children(".row").length) / 1;
            if (item2 > 1) {
                $("#creditRemoveBtn").show();
            }
            else {
                $("#creditRemoveBtn").hide();
            }
        });

    });




</script>

